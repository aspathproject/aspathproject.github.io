(self.webpackChunkaspath_docs=self.webpackChunkaspath_docs||[]).push([[170],{8955:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>re});var a=s(6252);const l=(0,a.Wm)("h1",{id:"getting-started"},[(0,a.Wm)("a",{class:"header-anchor",href:"#getting-started"},"#"),(0,a.Uk)(" Getting Started")],-1),t=(0,a.Wm)("h2",{id:"prerequisites"},[(0,a.Wm)("a",{class:"header-anchor",href:"#prerequisites"},"#"),(0,a.Uk)(" Prerequisites")],-1),o=(0,a.Wm)("li",null,"A physical server or virtual machine with Linux (Latest Debian or Ubuntu server should work just fine).",-1),r={href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"},c=(0,a.Uk)("Docker"),m={href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"},i=(0,a.Uk)("Docker-compose"),u={href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git",target:"_blank",rel:"noopener noreferrer"},p=(0,a.Uk)("Git"),d=(0,a.uE)('<h2 id="capacity-planning"><a class="header-anchor" href="#capacity-planning">#</a> Capacity Planning</h2><p>As the software will store (lots of) routing table snapshots, appropiate sizing must be calculated to avoid storage issues in the future.</p><p>Actual development deployment reference:</p><ul><li>2 route collectors are being monitored: <ul><li><code>route-collector.scl.pch.net</code> (from Jan 1, 2018)</li><li><code>route-collector.ros.pch.net</code> (from Jan 1, 2020)</li></ul></li><li>Daily snapshot grabbing for both route-collector is configured (using PCH daily snapshot driver)</li><li>1,666 routing snapshots saved and parsed on database</li><li>A total of <strong>27,735,770</strong> saved routes using <strong>2.7GB</strong> of storage (just considering <code>ip_routes</code> table)</li><li>98,549 registered autonomous systems</li><li>A total parent folder size of <strong>3.8GB</strong></li></ul><p>The following minimum requirements are recommmended:</p><ul><li>70GB of flash storage (to increase performance for database queries)</li><li>8GB RAM available to database container</li></ul><h2 id="manual-installation"><a class="header-anchor" href="#manual-installation">#</a> Manual Installation</h2>',7),W=(0,a.uE)('<li><p>Clone github repository and checkout develop branch and checkout <code>develop</code> branch (no stable release available at the moment).</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone git@github.com:aspathproject/aspath.git\n<span class="token builtin class-name">cd</span> aspath\n<span class="token function">git</span> checkout develop\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>Create configuration file: copying the example configuration should be enough to start. From the project root folder execute:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> configuration\n<span class="token function">cp</span> aspath.toml.dist aspath.toml\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>Build containers and start application</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker-compose up --no-start\ndocker-compose start\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li>',3),b=(0,a.Wm)("p",null,"Check that all containers are running properly",-1),k=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Uk)("docker "),(0,a.Wm)("span",{class:"token function"},"ps"),(0,a.Uk)("\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),h=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Uk)(" CONTAINER ID        IMAGE                              COMMAND                  CREATED             STATUS              PORTS                    NAMES\n ca469fa9a46d        aspath_celerybeat                  "),(0,a.Wm)("span",{class:"token string"},'"/start_celerybeat.sh"'),(0,a.Uk)("   "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"80"),(0,a.Uk)("/tcp                   aspath_celerybeat_1\n 524466103b94        aspath_frontend                    "),(0,a.Wm)("span",{class:"token string"},'"docker-entrypoint.s…"'),(0,a.Uk)("   "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"0.0"),(0,a.Uk)(".0.0:8080-"),(0,a.Wm)("span",{class:"token operator"},">"),(0,a.Wm)("span",{class:"token number"},"8080"),(0,a.Uk)("/tcp   aspath_frontend_1\n f287b14c775e        aspath_celery_worker               "),(0,a.Wm)("span",{class:"token string"},'"/start_celery.sh"'),(0,a.Uk)("       "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"80"),(0,a.Uk)("/tcp                   aspath_celery_worker_1\n f0fcf678334d        aspath_backend                     "),(0,a.Wm)("span",{class:"token string"},'"/start-reload.sh"'),(0,a.Uk)("       "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"0.0"),(0,a.Uk)(".0.0:8000-"),(0,a.Wm)("span",{class:"token operator"},">"),(0,a.Wm)("span",{class:"token number"},"80"),(0,a.Uk)("/tcp     aspath_backend_1\n 021d70861f92        redis:6.2.1-alpine                 "),(0,a.Wm)("span",{class:"token string"},'"docker-entrypoint.s…"'),(0,a.Uk)("   "),(0,a.Wm)("span",{class:"token number"},"9"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"6379"),(0,a.Uk)("/tcp                 aspath_redis_1\n 2d592f6615b4        timescale/timescaledb:2.1.1-pg13   "),(0,a.Wm)("span",{class:"token string"},'"docker-entrypoint.s…"'),(0,a.Uk)("   "),(0,a.Wm)("span",{class:"token number"},"9"),(0,a.Uk)(" hours ago         Up "),(0,a.Wm)("span",{class:"token number"},"8"),(0,a.Uk)(" hours          "),(0,a.Wm)("span",{class:"token number"},"0.0"),(0,a.Uk)(".0.0:5431-"),(0,a.Wm)("span",{class:"token operator"},">"),(0,a.Wm)("span",{class:"token number"},"5432"),(0,a.Uk)("/tcp   aspath_timescaledb_1\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"7"),(0,a.Wm)("br")])],-1),g=(0,a.Wm)("p",null,"Check database versioning status",-1),_=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Uk)("docker-compose "),(0,a.Wm)("span",{class:"token builtin class-name"},"exec"),(0,a.Uk)(" backend masonite-orm migrate:status\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),f=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Uk)(" +------+----------------------------------------------------------------+\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Ran? "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Migration                                                      "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n +------+----------------------------------------------------------------+\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_180153_migration_for_datasets_table                 "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_184139_migration_for_autonomous_systems_table       "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_184209_migration_for_internet_exchange_points_table "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_184330_migration_for_route_collectors               "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_184340_migration_for_routing_snapshots              "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_10_184350_migration_for_ip_routes_table                "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_12_220019_create_hypertable_for_ip_routes              "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_04_22_042301_AddSlugToInternetExchangePoints              "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" Y    "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)(" 2021_05_09_043427_add_driver_column                            "),(0,a.Wm)("span",{class:"token operator"},"|"),(0,a.Uk)("\n +------+----------------------------------------------------------------+\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"7"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"8"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"9"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"10"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"11"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"12"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"13"),(0,a.Wm)("br")])],-1),U=(0,a.uE)('<li><p>To run pending migrations execute:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker-compose <span class="token builtin class-name">exec</span> backend masonite-orm migrate\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>A restart might be needed after a successful migration. To restart the whole system use the following command</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker-compose restart\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li>',2),v=(0,a.Wm)("p",null,[(0,a.Uk)("Deployment should be live now on "),(0,a.Wm)("code",null,"0.0.0.0:8080"),(0,a.Uk)(" 🔥 you can do a manual health check locally executing the following command on the docker machine:")],-1),w=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"curl"),(0,a.Uk)(" localhost:8080/api/\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),x=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token punctuation"},"{"),(0,a.Wm)("span",{class:"token string"},'"Hello"'),(0,a.Wm)("span",{class:"token builtin class-name"},":"),(0,a.Wm)("span",{class:"token string"},'"from ASPATH project"'),(0,a.Wm)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),y=(0,a.Wm)("h2",{id:"adding-a-route-collector"},[(0,a.Wm)("a",{class:"header-anchor",href:"#adding-a-route-collector"},"#"),(0,a.Uk)(" Adding a route collector")],-1),C=(0,a.Uk)("Now that the software is running let's add the first data source. First we choose one of the "),I={href:"https://www.pch.net/resources/Routing_Data/IPv4_daily_snapshots/2021/05/",target:"_blank",rel:"noopener noreferrer"},E=(0,a.Uk)("195 route-collectors"),P=(0,a.Uk)(" PCH has available on it's website."),T=(0,a.Wm)("p",null,[(0,a.Uk)("For this example we will use "),(0,a.Wm)("code",null,"route-collector.scl.pch.net"),(0,a.Uk)(", which is a route-collector connected to PIT Chile IXP, but you can choose a different one and replace them in the commands.")],-1),A=(0,a.Wm)("p",null,"First we will add the route-collector to the database. Currently, an SQL query has to be executed:",-1),q=(0,a.uE)('<li><p>Open PostgreSQL console</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker-compose <span class="token builtin class-name">exec</span> timescaledb psql -U postgres\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Change to ASPATH database</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\\c aspath\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li>',2),S=(0,a.Wm)("p",null,"Execute an insert query to add an internet exchange to the database",-1),N=(0,a.Wm)("div",{class:"language-sql ext-sql line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-sql"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token keyword"},"INSERT"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token keyword"},"INTO"),(0,a.Uk)(" internet_exchange_points"),(0,a.Wm)("span",{class:"token punctuation"},"("),(0,a.Uk)("name"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(" slug"),(0,a.Wm)("span",{class:"token punctuation"},")"),(0,a.Uk)(" \n"),(0,a.Wm)("span",{class:"token keyword"},"VALUES"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token punctuation"},"("),(0,a.Wm)("span",{class:"token string"},"'PIT Chile'"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a.Wm)("span",{class:"token string"},"'pit-chile'"),(0,a.Wm)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token keyword"},"RETURNING"),(0,a.Uk)(" id"),(0,a.Wm)("span",{class:"token punctuation"},";"),(0,a.Uk)("\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br")])],-1),O=(0,a.Wm)("div",{class:"language-sql ext-sql line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-sql"},[(0,a.Wm)("code",null,[(0,a.Uk)("id\n"),(0,a.Wm)("span",{class:"token comment"},"----"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token number"},"1"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token punctuation"},"("),(0,a.Wm)("span",{class:"token number"},"1"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token keyword"},"row"),(0,a.Wm)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n"),(0,a.Wm)("span",{class:"token keyword"},"INSERT"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token number"},"0"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token number"},"1"),(0,a.Uk)("\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br")])],-1),R=(0,a.Wm)("p",null,[(0,a.Uk)('"PIT Chile" will be the display name in the platform while the '),(0,a.Wm)("code",null,"slug"),(0,a.Uk)(" value ('pit-chile' in the example) will be the url-friendly name of the internet exchange.")],-1),G=(0,a.Wm)("p",null,[(0,a.Uk)("Once the query is executed, the database will return the ID of the inserted row. In this case, the database returned "),(0,a.Wm)("code",null,"1"),(0,a.Uk)(" as the id for the added internet exchange.")],-1),D=(0,a.Wm)("p",null,"Execute the insert query to add the route-collector",-1),M=(0,a.Wm)("div",{class:"language-sql ext-sql line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-sql"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token keyword"},"INSERT"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token keyword"},"INTO"),(0,a.Uk)(" route_collectors"),(0,a.Wm)("span",{class:"token punctuation"},"("),(0,a.Uk)("name"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(" organization_name"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(" ixp_id"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(" driver"),(0,a.Wm)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token keyword"},"VALUES"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token punctuation"},"("),(0,a.Wm)("span",{class:"token string"},"'route-collector.scl.pch.net'"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a.Wm)("span",{class:"token string"},"'Packet Clearing House'"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a.Wm)("span",{class:"token number"},"1"),(0,a.Wm)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a.Wm)("span",{class:"token string"},"'pch_v4'"),(0,a.Wm)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token keyword"},"RETURNING"),(0,a.Uk)(" id"),(0,a.Wm)("span",{class:"token punctuation"},";"),(0,a.Uk)("\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br")])],-1),Y=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,"id\n----\n 1\n(1 row)\n\nINSERT 0 1\n")]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br")])],-1),H=(0,a.uE)('<div class="custom-container warning"><p class="custom-container-title">Note</p><p>Please note that the collector name must be entered exactly as shown on PCH website in order to make the grabber module work.</p></div><p>The following parameters were used on this query (in order):</p><ul><li><code>route-collector.scl.pch.net</code>: name of the route collector as shown on PCH website.</li><li><code>Packet Clearing House</code>: name of the organization that manages the route collector for display purposes.</li><li><code>1</code>: the ID from the IXP we want to associate this route-collector with. It&#39;s the identification we got from the earlier step when the IXP was added.</li><li><code>pch_v4</code>: it&#39;s the driver that should be use to process this route-collector related data. This will allow the software to store and process PCH snapshots in the same format they are published.</li></ul>',3),L={start:"5"},j=(0,a.Wm)("p",null,"You can now quit PostgreSQL console by pressing Ctrl+D and then check that a route-collector is detected on database:",-1),z=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"curl"),(0,a.Uk)(" localhost:8080/api/statistics\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),B=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,'{"route_collector_count":1,"snapshots_count":0,"autonomous_systems":0,"ixp_count":1}\n')]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),F=(0,a.Wm)("p",null,"So now the platform recognizes 1 IXP and our first route collector 🙌.",-1),X=(0,a.Wm)("h2",{id:"scheduling-automatic-data-fetching"},[(0,a.Wm)("a",{class:"header-anchor",href:"#scheduling-automatic-data-fetching"},"#"),(0,a.Uk)(" Scheduling automatic data fetching")],-1),Q=(0,a.Wm)("p",null,[(0,a.Uk)("We will now schedule the grabber module to execute every day at 6:35AM to get latest data from "),(0,a.Wm)("code",null,"route-collector.scl.pch.net")],-1),J=(0,a.Wm)("li",null,[(0,a.Wm)("p",null,[(0,a.Uk)("Open the file "),(0,a.Wm)("code",null,"configuration/aspath.toml"),(0,a.Uk)(" with your preferred text editor. In case you don't have that file or it's empty, please check step 2 from \"Manual Installation\".")])],-1),V=(0,a.Wm)("p",null,[(0,a.Uk)("Add the following line inside the "),(0,a.Wm)("code",null,"[grabbers]"),(0,a.Uk)(" section:")],-1),K=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,'[grabbers."route-collector.scl.pch.net"]\n  # run at 6:35 AM everyday\n  hour = 6\n  minutes = 35\n\n')]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br")])],-1),Z=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,'[grabbers]\n  [grabbers."route-collector.scl.pch.net"]\n  # run at 6:35 AM everyday\n  hour = 6\n  minutes = 35\n')]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br")])],-1),$=(0,a.Wm)("div",{class:"custom-container tip"},[(0,a.Wm)("p",{class:"custom-container-title"},"Note"),(0,a.Wm)("p",null,[(0,a.Uk)("You can schedule each route collector at a different time. To configure additional route-collector, repeat each step and append a new block inside "),(0,a.Wm)("code",null,"grabbers"),(0,a.Uk)(" section for the new collector.")])],-1),ee={start:"3"},ne=(0,a.Wm)("li",null,[(0,a.Wm)("p",null,"Now restart the backend to apply the new schedule:"),(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker-compose restart backend\n")]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])])],-1),se=(0,a.Wm)("p",null,"Let's check the current loaded schedule:",-1),ae=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"curl"),(0,a.Uk)(" localhost:8080/scheduler/\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),le=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,'[{"app":null,"name":"grab-route-collector.scl.pch.net","task":"worker.grab_and_ingest","args":["route-collector.scl.pch.net"],"kwargs":{},"options":{},"schedule":{"_orig_minute":35,"_orig_hour":6,"_orig_day_of_week":"*","_orig_day_of_month":"*","_orig_month_of_year":"*","_orig_kwargs":{},"hour":[6],"minute":[35],"day_of_week":[0,1,2,3,4,5,6],"day_of_month":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"month_of_year":[1,2,3,4,5,6,7,8,9,10,11,12],"nowfun":null,"_app":null},"last_run_at":"2021-05-17T23:56:04.061782+00:00","total_run_count":0}]\n')]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),te=(0,a.Wm)("p",null,[(0,a.Uk)("We should be able to identify an scheduled task with the name "),(0,a.Wm)("code",null,"grab-route-collector.scl.pch.net"),(0,a.Uk)(".")],-1),oe=(0,a.Wm)("li",null,[(0,a.Wm)("p",null,"The software now will automatically fetch old and new data daily. Please note this process may take approximately 2 hours on the first run.")],-1),re={render:function(e,n){const s=(0,a.up)("OutboundLink"),re=(0,a.up)("CodeGroupItem"),ce=(0,a.up)("CodeGroup");return(0,a.wg)(),(0,a.j4)(a.HY,null,[l,t,(0,a.Wm)("ul",null,[o,(0,a.Wm)("li",null,[(0,a.Wm)("a",r,[c,(0,a.Wm)(s)])]),(0,a.Wm)("li",null,[(0,a.Wm)("a",m,[i,(0,a.Wm)(s)])]),(0,a.Wm)("li",null,[(0,a.Wm)("a",u,[p,(0,a.Wm)(s)])])]),d,(0,a.Wm)("ol",null,[W,(0,a.Wm)("li",null,[b,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[h])),_:1})])),_:1})]),(0,a.Wm)("li",null,[g,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[f])),_:1})])),_:1})]),U,(0,a.Wm)("li",null,[v,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[x])),_:1})])),_:1})])]),y,(0,a.Wm)("p",null,[C,(0,a.Wm)("a",I,[E,(0,a.Wm)(s)]),P]),T,A,(0,a.Wm)("ol",null,[q,(0,a.Wm)("li",null,[S,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[N])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[O])),_:1})])),_:1}),R,G]),(0,a.Wm)("li",null,[D,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[Y])),_:1})])),_:1})])]),H,(0,a.Wm)("ol",L,[(0,a.Wm)("li",null,[j,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[B])),_:1})])),_:1})])]),F,X,Q,(0,a.Wm)("ol",null,[J,(0,a.Wm)("li",null,[V,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Add",active:""},{default:(0,a.w5)((()=>[K])),_:1}),(0,a.Wm)(re,{title:"Expected final content"},{default:(0,a.w5)((()=>[Z])),_:1})])),_:1})])]),$,(0,a.Wm)("ol",ee,[ne,(0,a.Wm)("li",null,[se,(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{title:"Command",active:""},{default:(0,a.w5)((()=>[ae])),_:1}),(0,a.Wm)(re,{title:"Expected Output"},{default:(0,a.w5)((()=>[le])),_:1})])),_:1}),te]),oe])],64)}}},74:(e,n,s)=>{"use strict";s.r(n),s.d(n,{data:()=>a});const a={key:"v-fb0f0066",path:"/guide/getting-started.html",title:"Getting Started",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Prerequisites",slug:"prerequisites",children:[]},{level:2,title:"Capacity Planning",slug:"capacity-planning",children:[]},{level:2,title:"Manual Installation",slug:"manual-installation",children:[]},{level:2,title:"Adding a route collector",slug:"adding-a-route-collector",children:[]},{level:2,title:"Scheduling automatic data fetching",slug:"scheduling-automatic-data-fetching",children:[]}],filePathRelative:"guide/getting-started.md",git:{updatedTime:1621649683e3,contributors:[]}}}}]);